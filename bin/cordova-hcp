#! /usr/bin/env node

/*eslint-disable */
var path = require('path');
var argv = require('yargs').argv;
var chcpContext = require(path.resolve(__dirname, '..', 'dist', 'context'));

var cmd = argv._[0];
switch (cmd) {
  case 'build':
  case 'login':
  case 'init':
  case 'server':
  case 'deploy':
    executeCmd(cmd, argv);
    break;
  default:
    console.log('TODO: Should print usage instructions.');
    process.exitCode = 0;
}

function executeCmd(command, argv) {
  var pathToExecutor = path.resolve(__dirname, '..', 'dist', command);
  var execute = require(pathToExecutor);
  var context = chcpContext(argv);

  return execute(context).catch(function(err) {
    console.log(err.stack);
    process.exitCode = 0;
  });
}
